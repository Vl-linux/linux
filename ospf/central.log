[vagrant@centralRouter ~]$ systemctl status zebra
● zebra.service - GNU Zebra routing manager
   Loaded: loaded (/usr/lib/systemd/system/zebra.service; disabled; vendor preset: disabled)
   Active: active (running) since Tue 2018-09-11 19:29:21 UTC; 17min ago
  Process: 4392 ExecStart=/usr/sbin/zebra -d $ZEBRA_OPTS -f /etc/quagga/zebra.conf (code=exited, status=0/SUCCESS)
  Process: 4391 ExecStartPre=/sbin/ip route flush proto zebra (code=exited, status=0/SUCCESS)
 Main PID: 4394 (zebra)
   CGroup: /system.slice/zebra.service
           └─4394 /usr/sbin/zebra -d -A 127.0.0.1 -f /etc/quagga/zebra.conf
[vagrant@centralRouter ~]$ systemctl status ospfd
● ospfd.service - OSPF routing daemon
   Loaded: loaded (/usr/lib/systemd/system/ospfd.service; disabled; vendor preset: disabled)
   Active: active (running) since Tue 2018-09-11 19:29:21 UTC; 17min ago
  Process: 4396 ExecStart=/usr/sbin/ospfd -d $OSPFD_OPTS -f /etc/quagga/ospfd.conf (code=exited, status=0/SUCCESS)
 Main PID: 4397 (ospfd)
   CGroup: /system.slice/ospfd.service
           └─4397 /usr/sbin/ospfd -d -A 127.0.0.1 -f /etc/quagga/ospfd.conf
[vagrant@centralRouter ~]$ ip a
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host 
       valid_lft forever preferred_lft forever
2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
    link/ether 52:54:00:c9:c7:04 brd ff:ff:ff:ff:ff:ff
    inet 10.0.2.15/24 brd 10.0.2.255 scope global noprefixroute dynamic eth0
       valid_lft 85324sec preferred_lft 85324sec
    inet6 fe80::5054:ff:fec9:c704/64 scope link 
       valid_lft forever preferred_lft forever
3: eth1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
    link/ether 08:00:27:7d:b6:4c brd ff:ff:ff:ff:ff:ff
4: eth2: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
    link/ether 08:00:27:7f:9c:4e brd ff:ff:ff:ff:ff:ff
5: eth3: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
    link/ether 08:00:27:5d:66:73 brd ff:ff:ff:ff:ff:ff
    inet 192.168.0.1/28 brd 192.168.0.15 scope global noprefixroute eth3
       valid_lft forever preferred_lft forever
    inet6 fe80::a00:27ff:fe5d:6673/64 scope link 
       valid_lft forever preferred_lft forever
6: eth1.1@eth1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP group default qlen 1000
    link/ether 08:00:27:7d:b6:4c brd ff:ff:ff:ff:ff:ff
    inet 10.10.0.1/30 brd 10.10.0.3 scope global eth1.1
       valid_lft forever preferred_lft forever
    inet6 fe80::a00:27ff:fe7d:b64c/64 scope link 
       valid_lft forever preferred_lft forever
7: eth2.3@eth2: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP group default qlen 1000
    link/ether 08:00:27:7f:9c:4e brd ff:ff:ff:ff:ff:ff
    inet 10.10.0.10/30 brd 10.10.0.11 scope global eth2.3
       valid_lft forever preferred_lft forever
    inet6 fe80::a00:27ff:fe7f:9c4e/64 scope link 
       valid_lft forever preferred_lft forever
[vagrant@centralRouter ~]$ 
[vagrant@centralRouter ~]$ sudo cat /etc/quagga/zebra.conf
hostname centralRouter
log file /var/log/zebra.log
log monitor
log stdout
log syslog
interface eth3
ip address 192.168.0.1/28
interface eth1.1
ip address 10.10.0.1/30
interface eth2.3
ip address 10.10.0.10/30
[vagrant@centralRouter ~]$ sudo cat /etc/quagga/ospfd.conf
hostname centralRouter
router ospf
ospf router-id 10.10.0.1
 network 10.10.0.0/30 area 0
 network 10.10.0.8/30 area 0
 network 192.168.0.0/28 area 3
 redistribute connected
log file /var/log/ospfd.log
[vagrant@centralRouter ~]$ 
[vagrant@centralRouter ~]$ tracepath 192.168.1.1
 1?: [LOCALHOST]                                         pmtu 1500
 1:  192.168.1.1                                           1.874ms reached
 1:  192.168.1.1                                           2.077ms reached
     Resume: pmtu 1500 hops 1 back 1 
[vagrant@centralRouter ~]$ tracepath 192.168.2.1
 1?: [LOCALHOST]                                         pmtu 1500
 1:  192.168.2.1                                           1.669ms reached
 1:  192.168.2.1                                           1.816ms reached
     Resume: pmtu 1500 hops 1 back 1 
[vagrant@centralRouter ~]$ 
[vagrant@office2Router ~]$ sudo systemctl satus zebra ospfd
Unknown operation 'satus'.
[vagrant@office2Router ~]$ sudo systemctl status zebra ospfd
● zebra.service - GNU Zebra routing manager
   Loaded: loaded (/usr/lib/systemd/system/zebra.service; disabled; vendor preset: disabled)
   Active: active (running) since Tue 2018-09-11 20:07:35 UTC; 17s ago
  Process: 4740 ExecStart=/usr/sbin/zebra -d $ZEBRA_OPTS -f /etc/quagga/zebra.conf (code=exited, status=0/SUCCESS)
  Process: 4739 ExecStartPre=/sbin/ip route flush proto zebra (code=exited, status=0/SUCCESS)
 Main PID: 4742 (zebra)
   CGroup: /system.slice/zebra.service
           └─4742 /usr/sbin/zebra -d -A 127.0.0.1 -f /etc/quagga/zebra.conf

Sep 11 20:07:35 office2Router systemd[1]: Starting GNU Zebra routing manager...
Sep 11 20:07:35 office2Router zebra[4740]: 2018/09/11 20:07:35 ZEBRA: buffer_flush_available: write error on fd 0: Bad file descriptor
Sep 11 20:07:35 office2Router systemd[1]: PID file /run/quagga/zebra.pid not readable (yet?) after start.
Sep 11 20:07:35 office2Router zebra[4742]: Zebra 0.99.22.4 starting: vty@2601
Sep 11 20:07:35 office2Router systemd[1]: Started GNU Zebra routing manager.
Sep 11 20:07:41 office2Router zebra[4742]: client 15 says hello and bids fair to announce only ospf routes

● ospfd.service - OSPF routing daemon
   Loaded: loaded (/usr/lib/systemd/system/ospfd.service; disabled; vendor preset: disabled)
   Active: active (running) since Tue 2018-09-11 20:07:41 UTC; 11s ago
  Process: 4750 ExecStart=/usr/sbin/ospfd -d $OSPFD_OPTS -f /etc/quagga/ospfd.conf (code=exited, status=0/SUCCESS)
 Main PID: 4751 (ospfd)
   CGroup: /system.slice/ospfd.service
           └─4751 /usr/sbin/ospfd -d -A 127.0.0.1 -f /etc/quagga/ospfd.conf

Sep 11 20:07:41 office2Router systemd[1]: Starting OSPF routing daemon...
Sep 11 20:07:41 office2Router systemd[1]: PID file /run/quagga/ospfd.pid not readable (yet?) after start.
Sep 11 20:07:41 office2Router systemd[1]: Started OSPF routing daemon.
[vagrant@office2Router ~]$ 
[vagrant@centralRouter ~]$ sudo sysctl -a | grep rp_fil
net.ipv4.conf.all.arp_filter = 0
net.ipv4.conf.all.rp_filter = 1
net.ipv4.conf.default.arp_filter = 0
net.ipv4.conf.default.rp_filter = 1
net.ipv4.conf.eth0.arp_filter = 0
net.ipv4.conf.eth0.rp_filter = 1
net.ipv4.conf.eth1.arp_filter = 0
net.ipv4.conf.eth1.rp_filter = 1
net.ipv4.conf.eth1/1.arp_filter = 0
net.ipv4.conf.eth1/1.rp_filter = 1
net.ipv4.conf.eth2.arp_filter = 0
net.ipv4.conf.eth2.rp_filter = 1
net.ipv4.conf.eth2/3.arp_filter = 0
net.ipv4.conf.eth2/3.rp_filter = 1
net.ipv4.conf.eth3.arp_filter = 0
net.ipv4.conf.eth3.rp_filter = 1
net.ipv4.conf.lo.arp_filter = 0
net.ipv4.conf.lo.rp_filter = 0
sysctl: reading key "net.ipv6.conf.all.stable_secret"
sysctl: reading key "net.ipv6.conf.default.stable_secret"
sysctl: reading key "net.ipv6.conf.eth0.stable_secret"
sysctl: reading key "net.ipv6.conf.eth1.stable_secret"
sysctl: reading key "net.ipv6.conf.eth1/1.stable_secret"
sysctl: reading key "net.ipv6.conf.eth2.stable_secret"
sysctl: reading key "net.ipv6.conf.eth2/3.stable_secret"
sysctl: reading key "net.ipv6.conf.eth3.stable_secret"
sysctl: reading key "net.ipv6.conf.lo.stable_secret"
[vagrant@centralRouter ~]$ sudo sysctl net.ipv4.conf.all.rp_filter
net.ipv4.conf.all.rp_filter = 1
[vagrant@centralRouter ~]$ sudo sysctl net.ipv4.conf.all.rp_filter=0
net.ipv4.conf.all.rp_filter = 0
[vagrant@centralRouter ~]$ sudo sysctl net.ipv4.conf.default.rp_filter=0
net.ipv4.conf.default.rp_filter = 0
[vagrant@centralRouter ~]$ sudo sysctl net.ipv4.conf.eth1/1.rp_filter=0
net.ipv4.conf.eth1/1.rp_filter = 0
[vagrant@centralRouter ~]$ sudo sysctl net.ipv4.conf.eth2/3.rp_filter=0
net.ipv4.conf.eth2/3.rp_filter = 0
[vagrant@centralRouter ~]$ sudo sysctl -a | grep rp_fil
net.ipv4.conf.all.arp_filter = 0
net.ipv4.conf.all.rp_filter = 0
net.ipv4.conf.default.arp_filter = 0
sysctl: reading key "net.ipv6.conf.all.stable_secret"
sysctl: reading key "net.ipv6.conf.default.stable_secret"
sysctl: reading key "net.ipv6.conf.eth0.stable_secret"
sysctl: reading key "net.ipv6.conf.eth1.stable_secret"
sysctl: reading key "net.ipv6.conf.eth1/1.stable_secret"
sysctl: reading key "net.ipv6.conf.eth2.stable_secret"
sysctl: reading key "net.ipv6.conf.eth2/3.stable_secret"
net.ipv4.conf.default.rp_filter = 0
net.ipv4.conf.eth0.arp_filter = 0
net.ipv4.conf.eth0.rp_filter = 1
net.ipv4.conf.eth1.arp_filter = 0
net.ipv4.conf.eth1.rp_filter = 1
net.ipv4.conf.eth1/1.arp_filter = 0
net.ipv4.conf.eth1/1.rp_filter = 0
net.ipv4.conf.eth2.arp_filter = 0
net.ipv4.conf.eth2.rp_filter = 1
net.ipv4.conf.eth2/3.arp_filter = 0
net.ipv4.conf.eth2/3.rp_filter = 0
net.ipv4.conf.eth3.arp_filter = 0
net.ipv4.conf.eth3.rp_filter = 1
net.ipv4.conf.lo.arp_filter = 0
net.ipv4.conf.lo.rp_filter = 0
sysctl: reading key "net.ipv6.conf.eth3.stable_secret"
sysctl: reading key "net.ipv6.conf.lo.stable_secret"
[vagrant@centralRouter ~]$ 
[vagrant@centralRouter ~]$ 
[vagrant@centralRouter ~]$ 
[vagrant@centralRouter ~]$ sudo cat /etc/quagga/ospfd.conf
hostname centralRouter
router ospf
ospf router-id 10.10.0.1
 network 10.10.0.0/30 area 0
 network 10.10.0.8/30 area 0
 network 192.168.0.0/28 area 3
 redistribute connected

interface eth1.1
ip ospf cost 100

log file /var/log/ospfd.log
[vagrant@centralRouter ~]$ sudo cat /etc/quagga/zebra.conf
hostname centralRouter
log file /var/log/zebra.log
log monitor
log stdout
log syslog
interface eth3
ip address 192.168.0.1/28
interface eth1.1
ip address 10.10.0.1/30
interface eth2.3
ip address 10.10.0.10/30
[vagrant@centralRouter ~]$ ping 192.168.1.1
PING 192.168.1.1 (192.168.1.1) 56(84) bytes of data.
64 bytes from 192.168.1.1: icmp_seq=1 ttl=64 time=2.17 ms
64 bytes from 192.168.1.1: icmp_seq=2 ttl=64 time=1.65 ms
64 bytes from 192.168.1.1: icmp_seq=3 ttl=64 time=1.72 ms
^C
--- 192.168.1.1 ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2005ms
rtt min/avg/max/mdev = 1.655/1.851/2.175/0.230 ms
[vagrant@centralRouter ~]$ ping 192.168.2.1
PING 192.168.2.1 (192.168.2.1) 56(84) bytes of data.
64 bytes from 192.168.2.1: icmp_seq=1 ttl=64 time=1.19 ms
64 bytes from 192.168.2.1: icmp_seq=2 ttl=64 time=1.09 ms
^C
--- 192.168.2.1 ping statistics ---
2 packets transmitted, 2 received, 0% packet loss, time 1002ms
rtt min/avg/max/mdev = 1.095/1.145/1.195/0.050 ms
[vagrant@centralRouter ~]$ tracepath  192.168.1.1
 1?: [LOCALHOST]                                         pmtu 1500
 1:  10.10.0.9                                             1.741ms 
 1:  10.10.0.9                                             1.812ms 
 2:  192.168.1.1                                           0.738ms reached
     Resume: pmtu 1500 hops 2 back 1 
[vagrant@centralRouter ~]$ tracepath  192.168.2.1
 1?: [LOCALHOST]                                         pmtu 1500
 1:  192.168.2.1                                           1.619ms reached
 1:  192.168.2.1                                           2.128ms reached
     Resume: pmtu 1500 hops 1 back 1 
[vagrant@centralRouter ~]$ 
[vagrant@centralRouter ~]$ sudo vtysh -c 'show ip route 192.168.1.1'
Routing entry for 192.168.1.0/26
  Known via "ospf", distance 110, metric 30, best
  Last update 00:18:28 ago
  * 10.10.0.9, via eth2.3

[vagrant@centralRouter ~]$ sudo vtysh -c 'show ip route 192.168.2.1'
Routing entry for 192.168.2.0/25
  Known via "ospf", distance 110, metric 20, best
  Last update 00:18:45 ago
  * 10.10.0.9, via eth2.3

[vagrant@centralRouter ~]$ 
[vagrant@centralRouter ~]$ 
[vagrant@centralRouter ~]$ 
[vagrant@centralRouter ~]$ 
[vagrant@centralRouter ~]$ 
[vagrant@centralRouter ~]$ 
[vagrant@centralRouter ~]$ 
[vagrant@centralRouter ~]$ 
[vagrant@centralRouter ~]$ 
[vagrant@centralRouter ~]$ 
[vagrant@centralRouter ~]$ 
[vagrant@centralRouter ~]$ 
[vagrant@centralRouter ~]$ 
[vagrant@centralRouter ~]$ tracepath  192.168.1.1
 1?: [LOCALHOST]                                         pmtu 1500
 1:  10.10.0.9                                             1.630ms 
 1:  10.10.0.9                                             2.038ms 
 2:  192.168.1.1                                           1.842ms reached
     Resume: pmtu 1500 hops 2 back 2 
[vagrant@centralRouter ~]$ tracepath  192.168.2.1
 1?: [LOCALHOST]                                         pmtu 1500
 1:  192.168.2.1                                           1.536ms reached
 1:  192.168.2.1                                           2.689ms reached
     Resume: pmtu 1500 hops 1 back 1 
[vagrant@centralRouter ~]$ sudo vtysh -c 'show ip route 192.168.1.1'
Routing entry for 192.168.1.0/26
  Known via "ospf", distance 110, metric 30, best
  Last update 00:00:47 ago
  * 10.10.0.9, via eth2.3

[vagrant@centralRouter ~]$ sudo vtysh -c 'show ip route 192.168.2.1'
Routing entry for 192.168.2.0/25
  Known via "ospf", distance 110, metric 20, best
  Last update 00:27:34 ago
  * 10.10.0.9, via eth2.3

[vagrant@centralRouter ~]$ 

